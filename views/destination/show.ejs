<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= destination.name %> | TravelMate</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body {
      background-color: #f8f9fa;
      color: #212529;
    }

    .hero-image {
      position: relative;
      height: 350px;
      background-size: cover;
      background-position: center;
      border-radius: 20px;
      overflow: hidden;
    }

    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.4);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      text-shadow: 1px 1px 4px black;
      font-size: 2rem;
      font-weight: bold;
      border-radius: 20px;
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(8px);
      border-radius: 15px;
      padding: 2rem;
      border: 1px solid rgba(0, 0, 0, 0.05);
      box-shadow: 0 8px 16px rgba(0,0,0,0.05);
    }

    h4, h1 {
      color: #f0ad4e; /* Bootstrap warning */
    }

    label {
      font-weight: 500;
    }

    ul li::marker {
      color: #f0ad4e;
    }

    .btn-warning {
      font-weight: 500;
    }
  </style>
</head>
<body>
  <%- include('../partials/navbar') %>

  <div class="container mt-4">
    <% if(destination.imageUrl) { %>
      <div class="hero-image mb-4" style="background-image: url('<%= destination.imageUrl %>');">
        <div class="hero-overlay">
          <%= destination.name %>
        </div>
      </div>
    <% } else { %>
      <div class="bg-light text-dark text-center py-5 rounded mb-4 border">
        <h2><%= destination.name %></h2>
        <p>No Image Available</p>
      </div>
    <% } %>

    <div class="glass-card mb-4">
      <h4><i class="bi bi-info-circle"></i> Description:</h4>
      <p><%= destination.description %></p>

      <h4><i class="bi bi-geo-alt-fill"></i> Must Visit Places:</h4>
      <% if (destination.mustVisit && Array.isArray(destination.mustVisit)) { %>
        <ul>
          <% destination.mustVisit.forEach(place => { %>
            <li><%= place %></li>
          <% }) %>
        </ul>
      <% } else { %>
        <p>No must-visit places listed.</p>
      <% } %>

      <h4><i class="bi bi-calendar-event"></i> Best Time to Visit:</h4>
      <p><%= destination.bestTimeToVisit %></p>
    </div>

    <div class="glass-card mb-5">
      <h4><i class="bi bi-plus-square-dotted"></i> Plan Your Trip</h4>
      <form action="/trip-planner/add/<%= destination._id %>" method="POST" class="mt-3">
        <%
          const today = new Date();
          const maxYear = today.getFullYear() + 50;
          const maxDate = `${maxYear}-12-31`;
          const minDate = today.toISOString().split('T')[0];
        %>

        <div class="mb-3">
          <label for="startDate">Start Date:</label>
          <input type="date" name="startDate" id="startDate" class="form-control" required min="<%= minDate %>" max="<%= maxDate %>">
        </div>

        <div class="mb-3">
          <label for="endDate">End Date:</label>
          <input type="date" name="endDate" id="endDate" class="form-control" required min="<%= minDate %>" max="<%= maxDate %>">
        </div>

        <div class="mb-3">
          <label for="notes">Notes:</label>
          <textarea name="notes" id="notes" class="form-control" placeholder="Add notes (optional)"></textarea>
        </div>

        <button class="btn btn-warning w-100"><i class="bi bi-calendar-plus"></i> Add to Trip Planner</button>
      </form>
    </div>
  </div>


    <div class="container mb-5">
    <div class="glass-card">
      <h4><i class="bi bi-map"></i> Explore  <%= destination.name %>:</h4>
      <div class="ratio ratio-16x9">
        <iframe
          src="https://www.google.com/maps?q=<%= encodeURIComponent(destination.name) %>&output=embed"
          width="100%"
          height="400"
          style="border:0;"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </div>

  <%- include('../partials/footer') %>
</body>
</html>
